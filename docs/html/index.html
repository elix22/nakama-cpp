<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nakama C++ Client SDK: Nakama C/C++ Client SDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nakama_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nakama C++ Client SDK
   &#160;<span id="projectnumber">2.4.1</span>
   </div>
   <div id="projectbrief">Client for Nakama Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Nakama C/C++ Client SDK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__Users_dimo4eg_dev_nakama-cpp_README"></a></p>
<p><a href="https://github.com/heroiclabs/nakama-cpp/releases/latest"><img src="https://img.shields.io/github/release/heroiclabs/nakama-cpp.svg" alt="GitHub release" style="pointer-events: none;" class="inline"/></a> <a href="https://forum.heroiclabs.com"><img src="https://img.shields.io/badge/forum-online-success.svg" alt="Forum" style="pointer-events: none;" class="inline"/></a> <a href="https://heroiclabs.com/docs/cpp-client-guide"><img src="https://img.shields.io/badge/client_guide-online-brightgreen" alt="Client guide" class="inline"/></a> <a href="https://heroiclabs.github.io/nakama-cpp/html/index.html"><img src="https://img.shields.io/badge/reference-online-brightgreen" alt="Reference" class="inline"/></a> <a href="https://github.com/heroiclabs/nakama-cpp/releases/"><img src="https://img.shields.io/github/downloads/heroiclabs/nakama-cpp/total.svg" alt="Github all releases" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/heroiclabs/nakama/blob/master/LICENSE"><img src="https://img.shields.io/github/license/heroiclabs/nakama.svg" alt="License" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://github.com/heroiclabs/nakama-cpp/actions?query=workflow%3A%22Ubuntu+18.04%22"><img src="https://github.com/heroiclabs/nakama-cpp/workflows/Ubuntu%2018.04/badge.svg" alt="Build & tests on Ubuntu 18.04" style="pointer-events: none;" class="inline"/></a></p>
<blockquote class="doxtable">
<p>General C/C++ client for Nakama server. </p>
</blockquote>
<p><a href="https://github.com/heroiclabs/nakama">Nakama</a> is an open-source server designed to power modern games and apps. Features include user accounts, chat, social, matchmaker, realtime multiplayer, and much <a href="https://heroiclabs.com">more</a>.</p>
<p>This client implements the full API and socket options with the server. It's written in C and C++11 with minimal dependencies to support Cocos2d-x, Unreal and other custom engines and frameworks.</p>
<p>If you experience any issues with the client, it can be useful to enable debug logs (see <a href="#logging">Logging</a> section) and <a href="https://github.com/heroiclabs/nakama-cpp/issues">open an issue</a>.</p>
<p>Full documentation is online - <a href="https://heroiclabs.com/docs">https://heroiclabs.com/docs</a></p>
<h1>Getting Started</h1>
<p>You'll need to setup the server and database before you can connect with the client. The simplest way is to use Docker but have a look at the <a href="https://github.com/heroiclabs/nakama#getting-started">server documentation</a> for other options.</p>
<ol type="1">
<li>Install and run the servers. Follow these <a href="https://heroiclabs.com/docs/install-docker-quickstart">instructions</a>.</li>
<li>Nakama C/C++ SDK is released with prebuilt libraries for following platforms and architectures:</li>
</ol>
<ul>
<li>Windows - 7+, Visual Studio 2015, 2017, 2019 (x86, x64, Debug, Release)</li>
<li>Android - Android 4.1 (armeabi-v7a, arm64-v8a, x86, x86_64)</li>
<li>Linux - Ubuntu 18.04 x64</li>
<li>Mac - 10.10+</li>
<li>iOS - 8.0+ (arm64, armv7, armv7s, x86_64), Bitcode is off</li>
</ul>
<p>In theory any platform that meets the requirement for <code>cpprest</code> and <code>boost</code> is also supported. The client is compiled with C++11.</p>
<ol type="1">
<li>Download the client from the <a href="https://github.com/heroiclabs/nakama-cpp/releases">releases page</a>. You can also <a href="#source-builds">build from source</a>.</li>
<li>Integrate the client library into your project:</li>
</ol>
<p>When you've downloaded the Nakama C++ archive and extracted it to <code>NAKAMA_CPP_SDK</code> folder, you should include it in your project.</p>
<p>We don't recommend to copy Nakama C++ SDK to your project because it's quite big in size (~1 Gb).</p>
<h2>Setup for Mac and iOS projects</h2>
<ol type="1">
<li>Add <code>NAKAMA_CPP_SDK/include</code> in <code>Build Settings &gt; Header Search Paths</code></li>
<li>Add libs folder in <code>Build Settings &gt; Library Search Paths</code>:<ul>
<li><code>NAKAMA_CPP_SDK/libs/ios</code> - for iOS</li>
<li><code>NAKAMA_CPP_SDK/libs/mac</code> - for Mac</li>
</ul>
</li>
<li>In <code>General &gt; Frameworks, Libraries, and Embedded Content</code> add following:<ul>
<li>all <code>.a</code> files located in libs folder</li>
<li><code>foundation</code> and <code>security</code> frameworks</li>
</ul>
</li>
</ol>
<h2>Setup for Android projects</h2>
<p>If you use <code>CMake</code> then see <a href="#setup-for-cmake-projects">Setup for CMake projects</a> section.</p>
<p>If you use <code>ndk-build</code> then add following to your <code>Android.mk</code> file:</p>
<div class="fragment"><div class="line"># add this to your module</div>
<div class="line">LOCAL_STATIC_LIBRARIES += nakama-cpp</div>
<div class="line"> </div>
<div class="line"># add this at bottom of Android.mk file</div>
<div class="line">$(call import-add-path, NAKAMA_CPP_SDK)</div>
<div class="line">$(call import-module, nakama-cpp-android)</div>
</div><!-- fragment --><h3>Initialize Nakama SDK</h3>
<p>For most NativeActivity projects, if you have an entry point like:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> android_main(<span class="keyword">struct</span> android_app* state) {</div>
</div><!-- fragment --><p>Add include:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="android_8h.html">nakama-cpp/platform/android/android.h</a>&quot;</span></div>
</div><!-- fragment --><p>Add the following code at the top of the <code>android_main</code> function:</p>
<div class="fragment"><div class="line">Nakama::init(state-&gt;activity-&gt;vm);</div>
</div><!-- fragment --><h3>Shared library size</h3>
<p>Don't be afraid that nakama shared library are near 100 Mb in size. After building final apk it will be just few Mb.</p>
<h3>Android permissions</h3>
<p>Android uses a permissions system which determines which platform services the application will request to use and ask permission for from the user. The client uses the network to communicate with the server so you must add the "INTERNET" permission.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">uses-permission</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.permission.INTERNET&quot;</span>/&gt;</div>
</div><!-- fragment --><h2>Setup for CMake projects</h2>
<p>To link Nakama's static lib add following to your <code>CMakeLists.txt</code> file:</p>
<div class="fragment"><div class="line">add_subdirectory(NAKAMA_CPP_SDK ${CMAKE_CURRENT_BINARY_DIR}/nakama-cpp)</div>
<div class="line">target_link_libraries(${APP_NAME} ext_nakama-cpp)</div>
</div><!-- fragment --><p>To link Nakama's shared lib add following to your <code>CMakeLists.txt</code> file:</p>
<div class="fragment"><div class="line">set(NAKAMA_SHARED_LIBRARY TRUE)</div>
<div class="line">add_subdirectory(NAKAMA_CPP_SDK ${CMAKE_CURRENT_BINARY_DIR}/nakama-cpp)</div>
<div class="line">target_link_libraries(${APP_NAME} ext_nakama-cpp)</div>
<div class="line">CopyNakamaSharedLib(${APP_NAME})</div>
</div><!-- fragment --><h2>Setup for Visual Studio projects</h2>
<p>In <code>Project Settings</code> add following:</p>
<ol type="1">
<li>Add <code>NAKAMA_CPP_SDK/include</code> in <code>C/C++ &gt; General &gt; Additional Include Directories</code></li>
<li>Add libs folder in <code>Linker &gt; General &gt; Additional Library Directories</code>:<ul>
<li><code>NAKAMA_CPP_SDK/libs/win32/v140</code> - for VS 2015 x86</li>
<li><code>NAKAMA_CPP_SDK/libs/win64/v140</code> - for VS 2015 x64</li>
<li><code>NAKAMA_CPP_SDK/libs/win32/v141</code> - for VS 2017 x86</li>
<li><code>NAKAMA_CPP_SDK/libs/win64/v141</code> - for VS 2017 x64</li>
<li><code>NAKAMA_CPP_SDK/libs/win32/v142</code> - for VS 2019 x86</li>
<li><code>NAKAMA_CPP_SDK/libs/win64/v142</code> - for VS 2019 x64</li>
</ul>
</li>
<li>Add all <code>.lib</code> files located in libs folder in <code>Linker &gt; Input &gt; Additional Dependencies</code></li>
</ol>
<h2>Custom setup</h2>
<ul>
<li>add define:<ul>
<li><code>NLOGS_ENABLED</code> - define it if you want to use Nakama logger. See <a href="#logging">Logging</a> section</li>
</ul>
</li>
<li>add include directory: <code>/Users/dimo4eg/dev/nakama-cpp/release/nakama-cpp-sdk/include</code></li>
<li>add link directory: <code>/Users/dimo4eg/dev/nakama-cpp/release/nakama-cpp-sdk/libs/{platform}/{ABI}</code></li>
<li>add all libraries for linking from link directory</li>
</ul>
<h1>Threading model</h1>
<p>Nakama C++ is designed to use in one thread only.</p>
<h1>Usage</h1>
<h2>Use as static library</h2>
<p>Include nakama header and use nakama namespace.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_nakama_8h.html">nakama-cpp/Nakama.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="_n_types_8h.html#a2c64b5aeb4825f8fad53497227f671b5">NAKAMA_NAMESPACE</a>;</div>
</div><!-- fragment --><h2>Use as dynamic library</h2>
<p>Include nakama header and use nakama namespace.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;nakama-cpp-c-wrapper/NakamaWrapper.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="_n_types_8h.html#a2c64b5aeb4825f8fad53497227f671b5">NAKAMA_NAMESPACE</a>;</div>
</div><!-- fragment --><p>Include following header only once in some source file e.g. in <code>main.cpp</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;nakama-cpp-c-wrapper/NakamaWrapperImpl.h&quot;</span></div>
</div><!-- fragment --><p>This header includes implementation of Nakama C++ wrapper. It uses C interface to communicate with Nakama shared library (DLL).</p>
<h2>Client</h2>
<p>The client object has many methods to execute various features in the server or open realtime socket connections with the server.</p>
<p>Use the connection credentials to build a client object.</p>
<div class="fragment"><div class="line"><a class="code" href="struct_n_client_parameters.html">NClientParameters</a> parameters;</div>
<div class="line">parameters.<a class="code" href="struct_n_client_parameters.html#accab67f9e9fd8046c0345022dec6edaf">serverKey</a> = <span class="stringliteral">&quot;defaultkey&quot;</span>;</div>
<div class="line">parameters.<a class="code" href="struct_n_client_parameters.html#a06dcd02f2435e993cc02f43e16119d2a">host</a> = <span class="stringliteral">&quot;127.0.0.1&quot;</span>;</div>
<div class="line">parameters.<a class="code" href="struct_n_client_parameters.html#aac507a5e16c613527d020e13c6fe2a3a">port</a> = DEFAULT_PORT;</div>
<div class="line"><a class="code" href="_n_client_interface_8h.html#a40e31a5fd57f6847ff83dbcea2cb5233">NClientPtr</a> client = <a class="code" href="_client_factory_8h.html#a22585cf95dc129ab8da7cb0f8eaf764d">createDefaultClient</a>(parameters);</div>
</div><!-- fragment --><p>The <code>createDefaultClient</code> will create HTTP/1.1 client to use REST API.</p>
<h2>Tick</h2>
<p>The <code>tick</code> method pumps requests queue and executes callbacks in your thread. You must call it periodically (recommended every 50ms) in your thread.</p>
<div class="fragment"><div class="line">client-&gt;tick();</div>
<div class="line"><span class="keywordflow">if</span> (rtClient)</div>
<div class="line">    rtClient-&gt;tick();</div>
</div><!-- fragment --><p>Without this the default client and realtime client will not work, and you will not receive responses from the server.</p>
<h2>Authenticate</h2>
<p>There's a variety of ways to <a href="https://heroiclabs.com/docs/authentication">authenticate</a> with the server. Authentication can create a user if they don't already exist with those credentials. It's also easy to authenticate with a social profile from Google Play Games, Facebook, Game Center, etc.</p>
<div class="fragment"><div class="line"><span class="keywordtype">string</span> email = <span class="stringliteral">&quot;super@heroes.com&quot;</span>;</div>
<div class="line"><span class="keywordtype">string</span> password = <span class="stringliteral">&quot;batsignal&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> successCallback = [](<a class="code" href="_n_session_interface_8h.html#a2b34af61ee6dcd01147135a6673d0608">NSessionPtr</a> session)</div>
<div class="line">{</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;session token: &quot;</span> &lt;&lt; session-&gt;getAuthToken() &lt;&lt; std::endl;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> errorCallback = [](<span class="keyword">const</span> <a class="code" href="struct_n_error.html">NError</a>&amp; error)</div>
<div class="line">{</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">client-&gt;authenticateEmail(email, password, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, {}, successCallback, errorCallback);</div>
</div><!-- fragment --><h2>Sessions</h2>
<p>When authenticated the server responds with an auth token (JWT) which contains useful properties and gets deserialized into a <code>NSession</code> object.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; session-&gt;getAuthToken() &lt;&lt; std::endl; <span class="comment">// raw JWT token</span></div>
<div class="line">std::cout &lt;&lt; session-&gt;getUserId() &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; session-&gt;getUsername() &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Session has expired: &quot;</span> &lt;&lt; session-&gt;isExpired() &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Session expires at: &quot;</span> &lt;&lt; session-&gt;getExpireTime() &lt;&lt; std::endl;</div>
</div><!-- fragment --><p>It is recommended to store the auth token from the session and check at startup if it has expired. If the token has expired you must reauthenticate. The expiry time of the token can be changed as a setting in the server.</p>
<div class="fragment"><div class="line"><span class="keywordtype">string</span> authtoken = <span class="stringliteral">&quot;restored from somewhere&quot;</span>;</div>
<div class="line"><a class="code" href="_n_session_interface_8h.html#a2b34af61ee6dcd01147135a6673d0608">NSessionPtr</a> session = <a class="code" href="_n_session_interface_8h.html#ade4e04eb1ab8435da83082fcaa0e40bb">restoreSession</a>(authtoken);</div>
<div class="line"><span class="keywordflow">if</span> (session-&gt;isExpired()) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Session has expired. Must reauthenticate!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Requests</h2>
<p>The client includes lots of builtin APIs for various features of the game server. These can be accessed with the async methods. It can also call custom logic as RPC functions on the server. These can also be executed with a socket object.</p>
<p>All requests are sent with a session object which authorizes the client.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> successCallback = [](<span class="keyword">const</span> <a class="code" href="struct_n_account.html">NAccount</a>&amp; account)</div>
<div class="line">{</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;user id : &quot;</span> &lt;&lt; account.user.id &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;username: &quot;</span> &lt;&lt; account.user.username &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;wallet  : &quot;</span> &lt;&lt; account.wallet &lt;&lt; std::endl;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">client-&gt;getAccount(session, successCallback, errorCallback);</div>
</div><!-- fragment --><h2>Realtime client</h2>
<p>The client can create one or more realtime clients with the server. Each realtime client can have it's own events listener registered for responses received from the server.</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> createStatus = <span class="keyword">true</span>; <span class="comment">// if the socket should show the user as online to others.</span></div>
<div class="line"><span class="comment">// define realtime client in your class as NRtClientPtr rtClient;</span></div>
<div class="line">rtClient = client-&gt;createRtClient(DEFAULT_PORT);</div>
<div class="line"><span class="comment">// define listener in your class as NRtDefaultClientListener listener;</span></div>
<div class="line">listener.setConnectCallback([]()</div>
<div class="line">{</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Socket connected&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">});</div>
<div class="line">rtClient-&gt;setListener(&amp;listener);</div>
<div class="line">rtClient-&gt;connect(session, createStatus);</div>
</div><!-- fragment --><p>Don't forget to call <code>tick</code> method. See <a href="#tick">Tick</a> section for details.</p>
<h2>Logging</h2>
<h3>Initializing Logger</h3>
<p>Client logging is off by default.</p>
<p>To enable logs output to console with debug logging level:</p>
<div class="fragment"><div class="line"><a class="code" href="class_n_logger.html#a4a1f2cc09aba071995e42770400a074b">NLogger::initWithConsoleSink</a>(<a class="code" href="_n_log_sink_interface_8h.html#a1fe7e5b2fb92e38e924e9c5783e3eaf8">NLogLevel::Debug</a>);</div>
</div><!-- fragment --><p>To enable logs output to custom sink with debug logging level:</p>
<div class="fragment"><div class="line"><a class="code" href="class_n_logger.html#a5bfa83ab682374082b2d48bede762498">NLogger::init</a>(sink, <a class="code" href="_n_log_sink_interface_8h.html#a1fe7e5b2fb92e38e924e9c5783e3eaf8">NLogLevel::Debug</a>);</div>
</div><!-- fragment --><h3>Using Logger</h3>
<p>To log string with debug logging level:</p>
<div class="fragment"><div class="line">NLOG_DEBUG(&quot;debug log&quot;);</div>
</div><!-- fragment --><p>formatted log:</p>
<div class="fragment"><div class="line">NLOG(NLogLevel::Info, &quot;This is string: %s&quot;, &quot;yup I&#39;m string&quot;);</div>
<div class="line">NLOG(NLogLevel::Info, &quot;This is int: %d&quot;, 5);</div>
</div><!-- fragment --><p>Changing logging level boundary:</p>
<div class="fragment"><div class="line">NLogger::setLevel(NLogLevel::Debug);</div>
</div><!-- fragment --><p><code><a class="el" href="class_n_logger.html" title="Logger.">NLogger</a></code> behaviour depending on logging level boundary:</p>
<ul>
<li><code>Debug</code> writes all logs.</li>
<li><code>Info</code> writes logs with <code>Info</code>, <code>Warn</code>, <code>Error</code> and <code>Fatal</code> logging level.</li>
<li><code>Warn</code> writes logs with <code>Warn</code>, <code>Error</code> and <code>Fatal</code> logging level.</li>
<li><code>Error</code> writes logs with <code>Error</code> and <code>Fatal</code> logging level.</li>
<li><code>Fatal</code> writes only logs with <code>Fatal</code> logging level.</li>
</ul>
<p>Note: to use logging macroses you have to define <code>NLOGS_ENABLED</code>.</p>
<h2>Websockets transport</h2>
<p>Nakama C++ client has built-in support for WebSocket. This is available on all supported platforms.</p>
<p>Client will default to use the Websocket transport provided by <a href="https://github.com/microsoft/cpprestsdk">C++ REST SDK</a>.</p>
<p>You can use a custom Websocket transport by implementing the <a href="https://github.com/heroiclabs/nakama-cpp/blob/master/include/nakama-cpp/realtime/NRtTransportInterface.h">NRtTransportInterface</a>:</p>
<div class="fragment"><div class="line">rtClient = client-&gt;createRtClient(port, websockets_transport);</div>
</div><!-- fragment --><p>For more code examples, have a look at:</p>
<ul>
<li><a href="https://github.com/heroiclabs/nakama-cpp/blob/master/src/realtime/NWebsocketCppRest.h">NWebsocketCppRest</a></li>
<li><a href="https://github.com/heroiclabs/nakama-cocos2d-x/blob/master/example/Classes/NakamaCocos2d/NCocosWebSocket.h">NCocosWebSocket</a></li>
</ul>
<h3>Activity timeout</h3>
<p>Built-in websocket transport supports "Activity timeout" feature - if no any message received from server during "Activity timeout" then connection will be closed. Set 0 to disable this feature (default value).</p>
<div class="fragment"><div class="line">rtClient-&gt;getTransport()-&gt;setActivityTimeout(20000); <span class="comment">// 20 sec</span></div>
</div><!-- fragment --><p>You can change ping period on server - <code>ping_period_ms</code> parameter:</p>
<p><a href="https://heroiclabs.com/docs/install-configuration/#socket">https://heroiclabs.com/docs/install-configuration/#socket</a></p>
<h1>Contribute</h1>
<p>The development roadmap is managed as GitHub issues and pull requests are welcome. If you're interested to enhance the code please open an issue to discuss the changes or drop in and discuss it in the <a href="https://forum.heroiclabs.com">community forum</a>.</p>
<h1>Source Builds</h1>
<p>Clone the Nakama C++ repository:</p>
<p><code>git clone --recurse-submodules -j8 git://github.com/heroiclabs/nakama-cpp.git</code></p>
<p>To update all submodules:</p>
<p><code>git submodule update --init --recursive</code></p>
<p>Change submodule branch:</p>
<ul>
<li>edit <code>.gitmodules</code></li>
<li><code>git submodule update --remote</code></li>
</ul>
<h2>Build Prerequisites</h2>
<ul>
<li>git</li>
<li>python 2.7 or 3.x</li>
<li>CMake 3.15+</li>
<li>go</li>
<li>perl</li>
<li>Visual Studio 2015, 2017 or 2019 - for Windows only</li>
</ul>
<p>Third party libraries:</p>
<ul>
<li>boost 1.69 - must be installed in system and set path to <code>BOOST_ROOT</code> system variable. Used by <code>cpprest</code> library on Windows, Mac and Linux.</li>
<li>grpc - in source control as git submodule</li>
<li>optional-lite - in source control</li>
<li>cpprestsdk - in source control</li>
<li>rapidjson - in source control</li>
</ul>
<h2>Build Configuration</h2>
<p>Build configuration is located here:</p>
<div class="fragment"><div class="line">build/build_config.py</div>
</div><!-- fragment --><p>In the build configuration you can enable components depending on your needs.</p>
<p>There are following components:</p>
<ul>
<li>REST client (HTTP/1.1)</li>
<li>gRPC client</li>
<li>HTTP transport using C++ REST SDK</li>
<li>Websocket transport using C++ REST SDK</li>
<li>C API</li>
<li>Tests</li>
</ul>
<p>In the config you can also set whenever you need to build <code>nakama-cpp</code> as static, dynamic library or both version.</p>
<h2>Building for Windows</h2>
<div class="fragment"><div class="line">cd build\windows</div>
<div class="line">python build_windows.py -m Mode -a Arch -t Toolset --dll</div>
</div><!-- fragment --><p>Where <code>Mode</code> is build mode: <code>Debug</code> or <code>Release</code></p>
<p>Where <code>Arch</code> is architecture: <code>x86</code> or <code>x64</code></p>
<p>Where <code>Toolset</code> is platform toolset:</p>
<ul>
<li><code>v140</code> - Visual Studio 2015</li>
<li><code>v141</code> - Visual Studio 2017</li>
<li><code>v142</code> - Visual Studio 2019</li>
</ul>
<p><code>--dll</code> is optional parameter. If set then Nakama will be built as DLL otherwise as static library.</p>
<p>It builds and copies nakama lib to release folder.</p>
<p>To build for all modes, architectures and toolsets:</p>
<div class="fragment"><div class="line">cd build\windows</div>
<div class="line">python build_windows_all.py</div>
</div><!-- fragment --><h2>Building for Mac</h2>
<p>Prerequisites: </p><div class="fragment"><div class="line">sudo xcode-select --install</div>
<div class="line">brew install autoconf automake libtool shtool</div>
<div class="line">brew install gflags</div>
<div class="line">brew install cmake ninja boost</div>
</div><!-- fragment --><p>Build:</p>
<div class="fragment"><div class="line">cd build/mac</div>
<div class="line">python build_mac.py --dylib</div>
</div><!-- fragment --><p><code>--dylib</code> is optional parameter. If set then Nakama will be built as dynamic library otherwise as static.</p>
<p>It builds in <code>Release</code> mode and copies nakama lib to release folder.</p>
<h2>Building for iOS</h2>
<p>To build for one architecture:</p>
<div class="fragment"><div class="line">cd build/ios</div>
<div class="line">python build_ios.py Arch --dylib</div>
</div><!-- fragment --><p>Where <code>Arch</code> is architecture: <code>arm64</code>, <code>armv7</code>, <code>armv7s</code> or <code>x86_64</code>.</p>
<p><code>--dylib</code> is optional parameter. If set then Nakama will be built as dynamic library otherwise as static.</p>
<p>It builds in <code>Release</code> mode.</p>
<p>To build for all architectures <code>arm64</code>, <code>armv7</code>, <code>armv7s</code> and <code>x86_64</code>:</p>
<div class="fragment"><div class="line">cd build/ios</div>
<div class="line">python build_ios_all.py</div>
</div><!-- fragment --><p>It builds in <code>Release</code> mode, creates universal libraries and copies them to release folder.</p>
<h2>Building for Linux</h2>
<p>We use Ubuntu 18.04 amd64.</p>
<p>Prerequisites:</p>
<p>To automatically install all dependencies call:</p>
<div class="fragment"><div class="line">build/linux/install_deps.sh</div>
</div><!-- fragment --><p>It will install all needed packages, will download and build boost and CMake.</p>
<p>Execute command which will be printed at end.</p>
<p>To manually install dependencies:</p>
<ul>
<li><code>sudo apt-get install build-essential autoconf libtool pkg-config</code></li>
<li><code>sudo apt-get install libgflags-dev libgtest-dev</code></li>
<li><code>sudo apt-get install clang libc++-dev golang perl</code></li>
<li><p class="startli">download <code>boost</code> 1.69 sources and build them:</p>
<p class="startli"><code>./bootstrap.sh --with-libraries=system,chrono,thread</code></p>
<p class="startli"><code>./b2</code></p>
<p class="startli">set <code>BOOST_ROOT</code> env var to <code>boost</code> folder:</p>
<p class="startli"><code>export BOOST_ROOT={path to boost}</code></p>
</li>
<li><p class="startli">download <code>CMake</code> 3.15+ sources and build them:</p>
<p class="startli"><code>./bootstrap &amp;&amp; make &amp;&amp; make install</code></p>
</li>
</ul>
<p>To build as static or shared object library:</p>
<div class="fragment"><div class="line">cd build/linux</div>
<div class="line">python build_linux.py --so</div>
</div><!-- fragment --><p><code>--so</code> is optional parameter. If set then Nakama will be built as shared library otherwise as static.</p>
<p>It builds in <code>Release</code> mode and copies nakama lib to release folder.</p>
<p>To build both static and shared object library (see <a href="#build-configuration">Build Configuration</a>):</p>
<div class="fragment"><div class="line">cd build/linux</div>
<div class="line">python build_linux_all.py</div>
</div><!-- fragment --><h2>Building for Android</h2>
<p>Currently buid for Android is supported on Mac OS and Linux.</p>
<p>Set <code>ANDROID_NDK</code> or <code>NDK_ROOT</code> system variable to Android NDK folder.</p>
<p>To build for one ABI:</p>
<div class="fragment"><div class="line">cd build/android</div>
<div class="line">python build_android.py ABI --so</div>
</div><!-- fragment --><p>Where <code>ABI</code> is Android ABI e.g. <code>armeabi-v7a</code>, <code>arm64-v8a</code>, <code>x86</code> or <code>x86_64</code></p>
<p><code>--so</code> is optional parameter. If set then Nakama will be built as shared library otherwise as static.</p>
<p>It builds for Andoid API level 16 in <code>Release</code> mode.</p>
<p>To build for all ABIs <code>armeabi-v7a</code>, <code>arm64-v8a</code>, <code>x86</code> and <code>x86_64</code>:</p>
<div class="fragment"><div class="line">cd build/android</div>
<div class="line">python build_android_all.py</div>
</div><!-- fragment --><h1>Tests</h1>
<p>Tests are built when you build Nakama C++ SDK for desktop OS (Windows, Mac or Linux).</p>
<p>By default tests connect to local server by <code>127.0.0.1</code>. To use another IP of your server, edit <code>test/test_serverConfig.h</code> file.</p>
<h2>Prerequisites</h2>
<p>Tests require lua modules: download them from <a href="https://github.com/heroiclabs/nakama/tree/master/data/modules">https://github.com/heroiclabs/nakama/tree/master/data/modules</a> and put to <code>&lt;nakama-server&gt;/data/modules</code>.</p>
<p>Restart server.</p>
<h2>Run tests</h2>
<p>Run tests executable (console application):</p>
<div class="fragment"><div class="line">build/{platform}/build/test/Debug/nakama-test</div>
</div><!-- fragment --><h1>Full C++ Client example</h1>
<p>You can find the C++ Client example <a href="https://github.com/heroiclabs/nakama-cpp/tree/master/examples/nakama-cmake-client-example">here</a></p>
<h1>C language support</h1>
<p>Please follow README-C</p>
<h1>Generating Docs</h1>
<p>Prerequisites: <code>doxygen</code></p>
<p>Generate docs:</p>
<div class="fragment"><div class="line">cd docs</div>
<div class="line">doxygen Doxyfile</div>
</div><!-- fragment --><h1>License</h1>
<p>This project is licensed under the <a href="https://github.com/heroiclabs/nakama-dotnet/blob/master/LICENSE">Apache-2 License</a>.</p>
<h1>Special Thanks</h1>
<p>Thanks to <a href="https://github.com/dimon4eg">@dimon4eg</a> for this excellent support on developing Nakama C/C++, Cocos2d-x and Unreal client libraries. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aandroid_8h_html"><div class="ttname"><a href="android_8h.html">android.h</a></div></div>
<div class="ttc" id="a_n_client_interface_8h_html_a40e31a5fd57f6847ff83dbcea2cb5233"><div class="ttname"><a href="_n_client_interface_8h.html#a40e31a5fd57f6847ff83dbcea2cb5233">NClientPtr</a></div><div class="ttdeci">std::shared_ptr&lt; NClientInterface &gt; NClientPtr</div><div class="ttdef"><b>Definition:</b> NClientInterface.h:1179</div></div>
<div class="ttc" id="a_nakama_8h_html"><div class="ttname"><a href="_nakama_8h.html">Nakama.h</a></div></div>
<div class="ttc" id="a_client_factory_8h_html_a22585cf95dc129ab8da7cb0f8eaf764d"><div class="ttname"><a href="_client_factory_8h.html#a22585cf95dc129ab8da7cb0f8eaf764d">createDefaultClient</a></div><div class="ttdeci">NAKAMA_API NClientPtr createDefaultClient(const NClientParameters &amp;parameters)</div></div>
<div class="ttc" id="a_n_types_8h_html_a2c64b5aeb4825f8fad53497227f671b5"><div class="ttname"><a href="_n_types_8h.html#a2c64b5aeb4825f8fad53497227f671b5">NAKAMA_NAMESPACE</a></div><div class="ttdeci">#define NAKAMA_NAMESPACE</div><div class="ttdef"><b>Definition:</b> NTypes.h:27</div></div>
<div class="ttc" id="a_n_log_sink_interface_8h_html_a1fe7e5b2fb92e38e924e9c5783e3eaf8"><div class="ttname"><a href="_n_log_sink_interface_8h.html#a1fe7e5b2fb92e38e924e9c5783e3eaf8">Debug</a></div><div class="ttdeci">Debug</div><div class="ttdef"><b>Definition:</b> NLogSinkInterface.h:26</div></div>
<div class="ttc" id="astruct_n_account_html"><div class="ttname"><a href="struct_n_account.html">NAccount</a></div><div class="ttdoc">A user with additional account details. Always the current user.</div><div class="ttdef"><b>Definition:</b> NAccount.h:28</div></div>
<div class="ttc" id="astruct_n_client_parameters_html_accab67f9e9fd8046c0345022dec6edaf"><div class="ttname"><a href="struct_n_client_parameters.html#accab67f9e9fd8046c0345022dec6edaf">NClientParameters::serverKey</a></div><div class="ttdeci">std::string serverKey</div><div class="ttdoc">The key used to authenticate with the server without a session. Defaults to &quot;defaultkey&quot;.</div><div class="ttdef"><b>Definition:</b> ClientFactory.h:27</div></div>
<div class="ttc" id="a_n_session_interface_8h_html_ade4e04eb1ab8435da83082fcaa0e40bb"><div class="ttname"><a href="_n_session_interface_8h.html#ade4e04eb1ab8435da83082fcaa0e40bb">restoreSession</a></div><div class="ttdeci">NAKAMA_API NSessionPtr restoreSession(const std::string &amp;token)</div></div>
<div class="ttc" id="astruct_n_error_html"><div class="ttname"><a href="struct_n_error.html">NError</a></div><div class="ttdef"><b>Definition:</b> NError.h:62</div></div>
<div class="ttc" id="aclass_n_logger_html_a5bfa83ab682374082b2d48bede762498"><div class="ttname"><a href="class_n_logger.html#a5bfa83ab682374082b2d48bede762498">NLogger::init</a></div><div class="ttdeci">static void init(NLogSinkPtr sink, NLogLevel level=NLogLevel::Info)</div></div>
<div class="ttc" id="astruct_n_client_parameters_html"><div class="ttname"><a href="struct_n_client_parameters.html">NClientParameters</a></div><div class="ttdef"><b>Definition:</b> ClientFactory.h:25</div></div>
<div class="ttc" id="astruct_n_client_parameters_html_aac507a5e16c613527d020e13c6fe2a3a"><div class="ttname"><a href="struct_n_client_parameters.html#aac507a5e16c613527d020e13c6fe2a3a">NClientParameters::port</a></div><div class="ttdeci">int32_t port</div><div class="ttdef"><b>Definition:</b> ClientFactory.h:37</div></div>
<div class="ttc" id="astruct_n_client_parameters_html_a06dcd02f2435e993cc02f43e16119d2a"><div class="ttname"><a href="struct_n_client_parameters.html#a06dcd02f2435e993cc02f43e16119d2a">NClientParameters::host</a></div><div class="ttdeci">std::string host</div><div class="ttdoc">The host address of the server. Defaults to &quot;127.0.0.1&quot;.</div><div class="ttdef"><b>Definition:</b> ClientFactory.h:30</div></div>
<div class="ttc" id="a_n_session_interface_8h_html_a2b34af61ee6dcd01147135a6673d0608"><div class="ttname"><a href="_n_session_interface_8h.html#a2b34af61ee6dcd01147135a6673d0608">NSessionPtr</a></div><div class="ttdeci">std::shared_ptr&lt; NSessionInterface &gt; NSessionPtr</div><div class="ttdef"><b>Definition:</b> NSessionInterface.h:89</div></div>
<div class="ttc" id="aclass_n_logger_html_a4a1f2cc09aba071995e42770400a074b"><div class="ttname"><a href="class_n_logger.html#a4a1f2cc09aba071995e42770400a074b">NLogger::initWithConsoleSink</a></div><div class="ttdeci">static void initWithConsoleSink(NLogLevel level=NLogLevel::Info)</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
